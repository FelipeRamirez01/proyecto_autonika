{% extends 'base_admin.html' %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-lg p-4">
        <h2 class="text-center text-primary fw-bold">‚öô Configuraci√≥n del Conjunto Residencial</h2>


        <!-- Mensajes de alerta -->
        {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
        <form method="POST" action="{{ url_for('config.gestionar_datos_conjunto') }}" enctype="multipart/form-data">
            <!-- Nombre del conjunto -->
            <div class="mb-3">
                <label for="nombre" class="form-label fw-bold">Nombre del Conjunto</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-home"></i></span>
                    <input type="text" class="form-control" id="nombre" name="nombre"
                        value="{{ datos.nombre if datos else '' }}" required>
                </div>
            </div>
            <!-- Direcci√≥n -->
            <div class="mb-3">
                <label for="direccion" class="form-label fw-bold">Direcci√≥n</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                    <input type="text" class="form-control" id="direccion" name="direccion"
                        value="{{ datos.direccion if datos else '' }}" required>
                </div>
            </div>
            <!-- Tel√©fono -->
            <div class="mb-3">
                <label for="telefono" class="form-label fw-bold">Tel√©fono</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-phone"></i></span>
                    <input type="text" class="form-control" id="telefono" name="telefono"
                        value="{{ datos.telefono if datos else '' }}" required>
                </div>
            </div>
            <!-- NIT -->
            <div class="mb-3">
                <label for="nit" class="form-label fw-bold">NIT</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                    <input type="text" class="form-control" id="nit" name="nit" value="{{ datos.nit if datos else '' }}"
                        required>
                </div>
            </div>
            <!-- Cuenta bancaria -->
            <div class="mb-3">
                <label for="numero_cuenta" class="form-label fw-bold">N√∫mero de Cuenta Bancaria</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-university"></i></span>
                    <input type="text" class="form-control" id="numero_cuenta" name="numero_cuenta"
                        value="{{ datos.numero_cuenta if datos else '' }}" required>
                </div>
            </div>
            <!-- C√≥digo de cuenta -->
            <div class="mb-3">
                <label for="codigo_cuenta" class="form-label fw-bold">C√≥digo de la empresa</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-barcode"></i></span>
                    <input type="text" class="form-control" id="codigo_cuenta" name="codigo_cuenta"
                        value="{{ datos.codigo_cuenta if datos else '' }}" required>
                </div>
            </div>

            <!-- T√©rminos y Condiciones -->
            <div class="mb-3">
                <label for="terminos_pdf" class="form-label fw-bold">üìÑ T√©rminos y Condiciones (PDF)</label>

                {% if datos and datos.terminos_pdf %}
                <!-- Si ya hay un archivo de T√©rminos y Condiciones -->
                <div class="d-flex mt-2 gap-2">
                    <a href="{{ url_for('static', filename='configuracion/terminos_condiciones.pdf') }}" target="_blank"
                        class="btn btn-outline-primary">
                        Ver T√©rminos
                    </a>
                    <a href="{{ url_for('config.eliminar_pdf', tipo='terminos') }}" class="btn btn-outline-danger"
                        onclick="return confirm('¬øEliminar el PDF de t√©rminos y condiciones?')">
                        Eliminar
                    </a>
                </div>
                {% else %}
                <!-- Si no hay archivo de T√©rminos y Condiciones -->
                <input type="file" class="form-control" name="terminos_pdf" accept="application/pdf">
                {% endif %}
            </div>

            <!-- Pol√≠ticas de Privacidad -->
            <div class="mb-3">
                <label for="politicas_pdf" class="form-label fw-bold">üîê Pol√≠ticas de Privacidad (PDF)</label>

                {% if datos and datos.politicas_pdf %}
                <!-- Si ya hay un archivo de Pol√≠ticas de Privacidad -->
                <div class="d-flex mt-2 gap-2">
                    <a href="{{ url_for('static', filename='configuracion/politicas_privacidad.pdf') }}" target="_blank"
                        class="btn btn-outline-primary">
                        Ver Pol√≠tica
                    </a>
                    <a href="{{ url_for('config.eliminar_pdf', tipo='politicas') }}" class="btn btn-outline-danger"
                        onclick="return confirm('¬øEliminar el PDF de pol√≠ticas de privacidad?')">
                        Eliminar
                    </a>
                </div>
                {% else %}
                <!-- Si no hay archivo de Pol√≠ticas de Privacidad -->
                <input type="file" class="form-control" name="politicas_pdf" accept="application/pdf">
                {% endif %}
            </div>



            <div class="d-flex gap-2 justify-content-center">
                <button type="submit" class="btn btn-primary px-4">Guardar Cambios</button>
                <a href="{{ url_for('config.configuracion') }}" class="btn btn-secondary px-4">Volver</a>
            </div>
        </form>
    </div>
</div>

<script>
  // Esperar a que la p√°gina cargue completamente
  document.addEventListener("DOMContentLoaded", function () {
    // Seleccionar todas las alertas
    const alerts = document.querySelectorAll(".alert");

    // Configurar el tiempo de desaparici√≥n (en milisegundos)
    const tiempoDesaparicion = 5000; // 5000 ms = 5 segundos (puedes cambiarlo a 10000 para 10 segundos)

    alerts.forEach(alert => {
      // Configurar un temporizador para eliminar la alerta
      setTimeout(() => {
        alert.classList.add("fade"); // Agregar clase para animaci√≥n de desvanecimiento
        setTimeout(() => alert.remove(), 500); // Eliminar el elemento despu√©s de la animaci√≥n
      }, tiempoDesaparicion);
    });
  });
</script>
{% endblock %}